{
  "info": {
    "_postman_id": "c0d1d2f3-4a5b-678c-901d-ef23456789ab",
    "name": "FiltroRegaloService",
    "description": "Colección Postman para el servicio FiltroRegaloService. Gestiona la creación, actualización y eliminación de filtros de regalos asociados a listas de regalos.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "item": [
    {
      "name": "Crear filtro de regalo",
      "request": {
        "method": "POST",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"criterio\": \"precio\",\n  \"valor\": \"menor a 100000\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/listas/{{listaRegalosId}}/filtros",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "listas",
            "{{listaRegalosId}}",
            "filtros"
          ],
          "variable": [
            {
              "key": "listaRegalosId",
              "value": "1",
              "description": "ID de la lista de regalos a la que se asociará el filtro."
            }
          ]
        },
        "description": "Crea un nuevo filtro de regalo en una lista existente. No permite duplicar criterios y valores."
      },
      "response": [
        {
          "name": "201 Created",
          "originalRequest": {},
          "body": "{\n  \"id\": 5,\n  \"criterio\": \"precio\",\n  \"valor\": \"menor a 100000\",\n  \"listaRegalosId\": 1\n}"
        },
        {
          "name": "400 Bad Request",
          "originalRequest": {},
          "body": "{ \"error\": \"El criterio y el valor no pueden ser nulos ni vacíos.\" }"
        },
        {
          "name": "409 Conflict",
          "originalRequest": {},
          "body": "{ \"error\": \"Ya existe un filtro con el mismo criterio y valor en esta lista de regalos.\" }"
        }
      ]
    },
    {
      "name": "Actualizar filtro de regalo",
      "request": {
        "method": "PUT",
        "header": [
          {
            "key": "Content-Type",
            "value": "application/json"
          }
        ],
        "body": {
          "mode": "raw",
          "raw": "{\n  \"nuevoValor\": \"mayor a 50000\"\n}"
        },
        "url": {
          "raw": "{{baseUrl}}/filtros/{{filtroId}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "filtros",
            "{{filtroId}}"
          ],
          "variable": [
            {
              "key": "filtroId",
              "value": "5",
              "description": "ID del filtro a actualizar."
            }
          ]
        },
        "description": "Actualiza el valor de un filtro existente, validando que no se duplique el criterio y valor dentro de la misma lista."
      },
      "response": [
        {
          "name": "200 OK",
          "originalRequest": {},
          "body": "{\n  \"id\": 5,\n  \"criterio\": \"precio\",\n  \"valor\": \"mayor a 50000\",\n  \"listaRegalosId\": 1\n}"
        },
        {
          "name": "400 Bad Request",
          "originalRequest": {},
          "body": "{ \"error\": \"El valor del filtro no puede estar vacío.\" }"
        },
        {
          "name": "409 Conflict",
          "originalRequest": {},
          "body": "{ \"error\": \"No se puede actualizar el filtro: duplicaría criterio y valor en la misma lista.\" }"
        }
      ]
    },
    {
      "name": "Eliminar filtro de regalo",
      "request": {
        "method": "DELETE",
        "header": [],
        "url": {
          "raw": "{{baseUrl}}/filtros/{{filtroId}}",
          "host": [
            "{{baseUrl}}"
          ],
          "path": [
            "filtros",
            "{{filtroId}}"
          ],
          "variable": [
            {
              "key": "filtroId",
              "value": "5",
              "description": "ID del filtro a eliminar."
            }
          ]
        },
        "description": "Elimina un filtro de regalo si pertenece a una lista válida."
      },
      "response": [
        {
          "name": "200 OK",
          "originalRequest": {},
          "body": "{ \"mensaje\": \"Filtro eliminado correctamente.\" }"
        },
        {
          "name": "404 Not Found",
          "originalRequest": {},
          "body": "{ \"error\": \"Filtro no encontrado.\" }"
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "baseUrl",
      "value": "http://localhost:8080/api/filtros",
      "type": "string"
    }
  ]
}
